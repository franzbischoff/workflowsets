<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Create a Collection of tidymodels Workflows • workflowsets</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="tidyverse.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><link href="tidyverse-2.css" rel="stylesheet">
<!--optional theme--><link href="tidymodels.css" rel="stylesheet">
<meta property="og:title" content="Create a Collection of tidymodels Workflows">
<meta property="og:description" content="A workflow is a combination of a model and preprocessors
    (e.g, a formula, recipe, etc.) (Kuhn and Silge (2021)
    &lt;https://www.tmwr.org/&gt;). In order to try different combinations of
    these, an object can be created that contains many workflows. There
    are functions to create workflows en masse as well as training them
    and visualizing the results.">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-115082821-1"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-115082821-1');
</script>
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div class="navbar-brand-container">
        <a class="navbar-brand" href="index.html">workflowsets</a>
        <div class="info hidden-xs hidden-sm">
          <span class="partof">part of <a href="https://tidymodels.org">tidymodels</a></span>
          <span class="version version-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.2.9000</span>
        </div>
      </div>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav navbar-right">
<li>
  <a href="articles/evaluating-different-predictor-sets.html">Evaluating different predictors</a>
</li>
<li>
  <a href="articles/articles/tuning-and-comparing-models.html">Ranking models</a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li>
  <a href="news/index.html">News</a>
</li>
        <li>
  <a href="https://github.com/tidymodels/workflowsets/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div id="workflowsets" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#workflowsets" class="anchor"></a>workflowsets</h1></div>
<!-- badges: start -->

<p>The goal of workflowsets is to allow users to create and easily fit a large number of models. workflowsets can create a <em>workflow set</em> that holds multiple workflow objects. These objects can be created by crossing all combinations of preprocessors (e.g., formula, recipe, etc) and model specifications. This set can be easier tuned or resampled using a set of simple commands.</p>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>You can install the released version of workflowsets from <a href="https://CRAN.R-project.org">CRAN</a> with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"workflowsets"</span><span class="op">)</span></code></pre></div>
<p>And the development version from <a href="https://github.com/">GitHub</a> with:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"pak"</span><span class="op">)</span>
<span class="fu">pak</span><span class="fu">::</span><span class="fu"><a href="http://pak.r-lib.org/reference/pak.html">pak</a></span><span class="op">(</span><span class="st">"tidymodels/workflowsets"</span><span class="op">)</span></code></pre></div>
</div>
<div id="example" class="section level2">
<h2 class="hasAnchor">
<a href="#example" class="anchor"></a>Example</h2>
<p>It is often a good idea to try different types of models and preprocessing methods on a specific data set. tidymodels provides tools for this purpose: recipes for preprocessing/feature engineering and model specifications. workflowsets has functions for creating and evaluating combinations of modeling elements.</p>
<p>For example, the Chicago train ridership data has many numeric predictors that are highly correlated. There are a few approaches to compensating for this issue during modeling:</p>
<ol>
<li><p>Use a feature filter to remove redundant predictors.</p></li>
<li><p>Apply principal component analysis to decorrelate the data.</p></li>
<li><p>Use a regularized model to make the estimation process insensitive to correlated predictors.</p></li>
</ol>
<p>The first two methods can be used with any model while the last option is only available for specific models. Let’s create a basic recipe that we will build on:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidymodels.tidymodels.org">tidymodels</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/tidymodels/workflowsets">workflowsets</a></span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="va">Chicago</span><span class="op">)</span>
<span class="co"># Use a small sample to keep file sizes down:</span>
<span class="va">Chicago</span> <span class="op">&lt;-</span> <span class="va">Chicago</span> <span class="op">%&gt;%</span> <span class="fu">slice</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">365</span><span class="op">)</span>

<span class="va">base_recipe</span> <span class="op">&lt;-</span> 
   <span class="fu">recipe</span><span class="op">(</span><span class="va">ridership</span> <span class="op">~</span> <span class="va">.</span>, data <span class="op">=</span> <span class="va">Chicago</span><span class="op">)</span> <span class="op">%&gt;%</span> 
   <span class="co"># create date features</span>
   <span class="fu">step_date</span><span class="op">(</span><span class="va">date</span><span class="op">)</span> <span class="op">%&gt;%</span> 
   <span class="fu">step_holiday</span><span class="op">(</span><span class="va">date</span><span class="op">)</span> <span class="op">%&gt;%</span> 
   <span class="co"># remove date from the list of predictors</span>
   <span class="fu">update_role</span><span class="op">(</span><span class="va">date</span>, new_role <span class="op">=</span> <span class="st">"id"</span><span class="op">)</span> <span class="op">%&gt;%</span> 
   <span class="co"># create dummy variables from factor columns</span>
   <span class="fu">step_dummy</span><span class="op">(</span><span class="fu">all_nominal</span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> 
   <span class="co"># remove any columns with a single unique value</span>
   <span class="fu">step_zv</span><span class="op">(</span><span class="fu">all_predictors</span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> 
   <span class="fu">step_normalize</span><span class="op">(</span><span class="fu">all_predictors</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>To enact a correlation filter, an additional step is used:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">filter_rec</span> <span class="op">&lt;-</span> 
   <span class="va">base_recipe</span> <span class="op">%&gt;%</span> 
   <span class="fu">step_corr</span><span class="op">(</span><span class="fu">all_of</span><span class="op">(</span><span class="va">stations</span><span class="op">)</span>, threshold <span class="op">=</span> <span class="fu">tune</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>Similarly, for PCA:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">pca_rec</span> <span class="op">&lt;-</span> 
   <span class="va">base_recipe</span> <span class="op">%&gt;%</span> 
   <span class="fu">step_pca</span><span class="op">(</span><span class="fu">all_of</span><span class="op">(</span><span class="va">stations</span><span class="op">)</span>, num_comp <span class="op">=</span> <span class="fu">tune</span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> 
   <span class="fu">step_normalize</span><span class="op">(</span><span class="fu">all_predictors</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>We might want to assess a few different models, including a regularized method (<code>glmnet</code>):</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">regularized_spec</span> <span class="op">&lt;-</span> 
   <span class="fu">linear_reg</span><span class="op">(</span>penalty <span class="op">=</span> <span class="fu">tune</span><span class="op">(</span><span class="op">)</span>, mixture <span class="op">=</span> <span class="fu">tune</span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> 
   <span class="fu">set_engine</span><span class="op">(</span><span class="st">"glmnet"</span><span class="op">)</span>

<span class="va">cart_spec</span> <span class="op">&lt;-</span> 
   <span class="fu">decision_tree</span><span class="op">(</span>cost_complexity <span class="op">=</span> <span class="fu">tune</span><span class="op">(</span><span class="op">)</span>, min_n <span class="op">=</span> <span class="fu">tune</span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> 
   <span class="fu">set_engine</span><span class="op">(</span><span class="st">"rpart"</span><span class="op">)</span> <span class="op">%&gt;%</span> 
   <span class="fu">set_mode</span><span class="op">(</span><span class="st">"regression"</span><span class="op">)</span>

<span class="va">knn_spec</span> <span class="op">&lt;-</span> 
   <span class="fu">nearest_neighbor</span><span class="op">(</span>neighbors <span class="op">=</span> <span class="fu">tune</span><span class="op">(</span><span class="op">)</span>, weight_func <span class="op">=</span> <span class="fu">tune</span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> 
   <span class="fu">set_engine</span><span class="op">(</span><span class="st">"kknn"</span><span class="op">)</span> <span class="op">%&gt;%</span> 
   <span class="fu">set_mode</span><span class="op">(</span><span class="st">"regression"</span><span class="op">)</span></code></pre></div>
<p>Rather than creating all 9 combinations of these preprocessors and models, we can create a <em>workflow set</em>:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">chi_models</span> <span class="op">&lt;-</span> 
   <span class="fu"><a href="reference/workflow_set.html">workflow_set</a></span><span class="op">(</span>
      preproc <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>simple <span class="op">=</span> <span class="va">base_recipe</span>, filter <span class="op">=</span> <span class="va">filter_rec</span>, 
                     pca <span class="op">=</span> <span class="va">pca_rec</span><span class="op">)</span>,
      models <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>glmnet <span class="op">=</span> <span class="va">regularized_spec</span>, cart <span class="op">=</span> <span class="va">cart_spec</span>, 
                    knn <span class="op">=</span> <span class="va">knn_spec</span><span class="op">)</span>,
      cross <span class="op">=</span> <span class="cn">TRUE</span>
   <span class="op">)</span>
<span class="va">chi_models</span>
<span class="co">#&gt; # A workflow set/tibble: 9 x 4</span>
<span class="co">#&gt;   wflow_id      info                 option    result    </span>
<span class="co">#&gt;   &lt;chr&gt;         &lt;list&gt;               &lt;list&gt;    &lt;list&gt;    </span>
<span class="co">#&gt; 1 simple_glmnet &lt;tibble[,4] [1 × 4]&gt; &lt;opts[0]&gt; &lt;list [0]&gt;</span>
<span class="co">#&gt; 2 simple_cart   &lt;tibble[,4] [1 × 4]&gt; &lt;opts[0]&gt; &lt;list [0]&gt;</span>
<span class="co">#&gt; 3 simple_knn    &lt;tibble[,4] [1 × 4]&gt; &lt;opts[0]&gt; &lt;list [0]&gt;</span>
<span class="co">#&gt; 4 filter_glmnet &lt;tibble[,4] [1 × 4]&gt; &lt;opts[0]&gt; &lt;list [0]&gt;</span>
<span class="co">#&gt; 5 filter_cart   &lt;tibble[,4] [1 × 4]&gt; &lt;opts[0]&gt; &lt;list [0]&gt;</span>
<span class="co">#&gt; 6 filter_knn    &lt;tibble[,4] [1 × 4]&gt; &lt;opts[0]&gt; &lt;list [0]&gt;</span>
<span class="co">#&gt; 7 pca_glmnet    &lt;tibble[,4] [1 × 4]&gt; &lt;opts[0]&gt; &lt;list [0]&gt;</span>
<span class="co">#&gt; 8 pca_cart      &lt;tibble[,4] [1 × 4]&gt; &lt;opts[0]&gt; &lt;list [0]&gt;</span>
<span class="co">#&gt; 9 pca_knn       &lt;tibble[,4] [1 × 4]&gt; &lt;opts[0]&gt; &lt;list [0]&gt;</span></code></pre></div>
<p>It doesn’t make sense to use PCA or a filter with a <code>glmnet</code> model. We can remove these easily:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">chi_models</span> <span class="op">&lt;-</span> 
   <span class="va">chi_models</span> <span class="op">%&gt;%</span> 
   <span class="fu">anti_join</span><span class="op">(</span><span class="fu">tibble</span><span class="op">(</span>wflow_id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"pca_glmnet"</span>, <span class="st">"filter_glmnet"</span><span class="op">)</span><span class="op">)</span>, 
             by <span class="op">=</span> <span class="st">"wflow_id"</span><span class="op">)</span></code></pre></div>
<p>These models all have tuning parameters. To resolve these, we’ll need a resampling set. In this case, a time-series resampling method is used:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">splits</span> <span class="op">&lt;-</span> 
   <span class="fu">sliding_period</span><span class="op">(</span>
      <span class="va">Chicago</span>,
      <span class="va">date</span>,
      <span class="st">"day"</span>,
      lookback <span class="op">=</span> <span class="fl">300</span>,   <span class="co"># Each resample has 300 days for modeling</span>
      assess_stop <span class="op">=</span> <span class="fl">7</span>,  <span class="co"># One week for performance assessment</span>
      step <span class="op">=</span> <span class="fl">7</span>          <span class="co"># Ensure non-overlapping weeks for assessment</span>
   <span class="op">)</span>
<span class="va">splits</span>
<span class="co">#&gt; # Sliding period resampling </span>
<span class="co">#&gt; # A tibble: 9 x 2</span>
<span class="co">#&gt;   splits          id    </span>
<span class="co">#&gt;   &lt;list&gt;          &lt;chr&gt; </span>
<span class="co">#&gt; 1 &lt;split [301/7]&gt; Slice1</span>
<span class="co">#&gt; 2 &lt;split [301/7]&gt; Slice2</span>
<span class="co">#&gt; 3 &lt;split [301/7]&gt; Slice3</span>
<span class="co">#&gt; 4 &lt;split [301/7]&gt; Slice4</span>
<span class="co">#&gt; 5 &lt;split [301/7]&gt; Slice5</span>
<span class="co">#&gt; 6 &lt;split [301/7]&gt; Slice6</span>
<span class="co">#&gt; 7 &lt;split [301/7]&gt; Slice7</span>
<span class="co">#&gt; 8 &lt;split [301/7]&gt; Slice8</span>
<span class="co">#&gt; 9 &lt;split [301/7]&gt; Slice9</span></code></pre></div>
<p>We’ll use simple grid search for these models by running <code><a href="reference/workflow_map.html">workflow_map()</a></code>. This will execute a resampling or tuning function over the workflows in the <code>workflow</code> column:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="fl">123</span><span class="op">)</span>
<span class="va">chi_models</span> <span class="op">&lt;-</span> 
   <span class="va">chi_models</span> <span class="op">%&gt;%</span> 
   <span class="co"># The first argument is a function name from the {{tune}} package</span>
   <span class="co"># such as `tune_grid()`, `fit_resamples()`, etc.</span>
   <span class="fu"><a href="reference/workflow_map.html">workflow_map</a></span><span class="op">(</span><span class="st">"tune_grid"</span>, resamples <span class="op">=</span> <span class="va">splits</span>, grid <span class="op">=</span> <span class="fl">10</span>, 
                metrics <span class="op">=</span> <span class="fu">metric_set</span><span class="op">(</span><span class="va">mae</span><span class="op">)</span>, verbose <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="co">#&gt; i 1 of 7 tuning:     simple_glmnet</span>
<span class="co">#&gt; ✓ 1 of 7 tuning:     simple_glmnet (25.4s)</span>
<span class="co">#&gt; i 2 of 7 tuning:     simple_cart</span>
<span class="co">#&gt; ✓ 2 of 7 tuning:     simple_cart (27s)</span>
<span class="co">#&gt; i 3 of 7 tuning:     simple_knn</span>
<span class="co">#&gt; ✓ 3 of 7 tuning:     simple_knn (26.7s)</span>
<span class="co">#&gt; i 4 of 7 tuning:     filter_cart</span>
<span class="co">#&gt; ✓ 4 of 7 tuning:     filter_cart (42.1s)</span>
<span class="co">#&gt; i 5 of 7 tuning:     filter_knn</span>
<span class="co">#&gt; ✓ 5 of 7 tuning:     filter_knn (41.8s)</span>
<span class="co">#&gt; i 6 of 7 tuning:     pca_cart</span>
<span class="co">#&gt; ✓ 6 of 7 tuning:     pca_cart (33s)</span>
<span class="co">#&gt; i 7 of 7 tuning:     pca_knn</span>
<span class="co">#&gt; ✓ 7 of 7 tuning:     pca_knn (33s)</span>
<span class="va">chi_models</span>
<span class="co">#&gt; # A workflow set/tibble: 7 x 4</span>
<span class="co">#&gt;   wflow_id      info                 option    result   </span>
<span class="co">#&gt;   &lt;chr&gt;         &lt;list&gt;               &lt;list&gt;    &lt;list&gt;   </span>
<span class="co">#&gt; 1 simple_glmnet &lt;tibble[,4] [1 × 4]&gt; &lt;opts[3]&gt; &lt;tune[+]&gt;</span>
<span class="co">#&gt; 2 simple_cart   &lt;tibble[,4] [1 × 4]&gt; &lt;opts[3]&gt; &lt;tune[+]&gt;</span>
<span class="co">#&gt; 3 simple_knn    &lt;tibble[,4] [1 × 4]&gt; &lt;opts[3]&gt; &lt;tune[+]&gt;</span>
<span class="co">#&gt; 4 filter_cart   &lt;tibble[,4] [1 × 4]&gt; &lt;opts[3]&gt; &lt;tune[+]&gt;</span>
<span class="co">#&gt; 5 filter_knn    &lt;tibble[,4] [1 × 4]&gt; &lt;opts[3]&gt; &lt;tune[+]&gt;</span>
<span class="co">#&gt; 6 pca_cart      &lt;tibble[,4] [1 × 4]&gt; &lt;opts[3]&gt; &lt;tune[+]&gt;</span>
<span class="co">#&gt; 7 pca_knn       &lt;tibble[,4] [1 × 4]&gt; &lt;opts[3]&gt; &lt;tune[+]&gt;</span></code></pre></div>
<p>The <code>results</code> column contains the results of each call to <code>tune_grid()</code> for the workflows.</p>
<p>The <code><a href="https://ggplot2.tidyverse.org/reference/autoplot.html">autoplot()</a></code> method shows the rankings of the workflows:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/autoplot.html">autoplot</a></span><span class="op">(</span><span class="va">chi_models</span><span class="op">)</span></code></pre></div>
<p><img src="reference/figures/README-plot-1.svg" width="100%"></p>
<p>or the best from each workflow:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/autoplot.html">autoplot</a></span><span class="op">(</span><span class="va">chi_models</span>, select_best <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<p><img src="reference/figures/README-plot-best-1.svg" width="100%"></p>
<p>We can determine how well each combination did by looking at the best results per workflow:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="reference/rank_results.html">rank_results</a></span><span class="op">(</span><span class="va">chi_models</span>, rank_metric <span class="op">=</span> <span class="st">"mae"</span>, select_best <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">%&gt;%</span> 
   <span class="fu">select</span><span class="op">(</span><span class="va">rank</span>, <span class="va">mean</span>, <span class="va">model</span>, <span class="va">wflow_id</span>, <span class="va">.config</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 7 x 5</span>
<span class="co">#&gt;    rank  mean model            wflow_id      .config              </span>
<span class="co">#&gt;   &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;            &lt;chr&gt;         &lt;chr&gt;                </span>
<span class="co">#&gt; 1     1  1.85 linear_reg       simple_glmnet Preprocessor1_Model07</span>
<span class="co">#&gt; 2     2  2.18 decision_tree    simple_cart   Preprocessor1_Model09</span>
<span class="co">#&gt; 3     3  2.95 decision_tree    filter_cart   Preprocessor07_Model1</span>
<span class="co">#&gt; 4     4  3.00 decision_tree    pca_cart      Preprocessor3_Model2 </span>
<span class="co">#&gt; 5     5  3.34 nearest_neighbor simple_knn    Preprocessor1_Model05</span>
<span class="co">#&gt; 6     6  3.50 nearest_neighbor filter_knn    Preprocessor07_Model1</span>
<span class="co">#&gt; 7     7  3.81 nearest_neighbor pca_knn       Preprocessor4_Model1</span></code></pre></div>
</div>
<div id="contributing" class="section level2">
<h2 class="hasAnchor">
<a href="#contributing" class="anchor"></a>Contributing</h2>
<p>This project is released with a <a href="https://contributor-covenant.org/version/2/0/CODE_OF_CONDUCT.html">Contributor Code of Conduct</a>. By contributing to this project, you agree to abide by its terms.</p>
<ul>
<li><p>For questions and discussions about tidymodels packages, modeling, and machine learning, please <a href="https://community.rstudio.com/new-topic?category_id=15&amp;tags=tidymodels,question">post on RStudio Community</a>.</p></li>
<li><p>If you think you have encountered a bug, please <a href="https://github.com/tidymodels/workflowsets/issues">submit an issue</a>.</p></li>
<li><p>Either way, learn how to create and share a <a href="https://reprex.tidyverse.org/articles/articles/learn-reprex.html">reprex</a> (a minimal, reproducible example), to clearly communicate about your code.</p></li>
<li><p>Check out further details on <a href="https://www.tidymodels.org/contribute/">contributing guidelines for tidymodels packages</a> and <a href="https://www.tidymodels.org/help/">how to get help</a>.</p></li>
</ul>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Download from CRAN at <br><a href="https://cloud.r-project.org/package=workflowsets">https://​cloud.r-project.org/​package=workflowsets</a>
</li>
<li>Browse source code at <br><a href="https://github.com/tidymodels/workflowsets/">https://​github.com/​tidymodels/​workflowsets/​</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>
<div class="community">
<h2>Community</h2>
<ul class="list-unstyled">
<li><a href="CONTRIBUTING.html">Contributing guide</a></li>
<li><a href="CODE_OF_CONDUCT.html">Code of conduct</a></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Max Kuhn <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0003-2402-136X" target="orcid.widget" aria-label="ORCID"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li><a href="authors.html">All authors...</a></li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://codecov.io/gh/tidymodels/workflowsets?branch=main"><img src="https://codecov.io/gh/tidymodels/workflowsets/branch/main/graph/badge.svg" alt="Codecov test coverage"></a></li>
<li><a href="https://github.com/tidymodels/workflowsets/actions"><img src="https://github.com/tidymodels/workflowsets/workflows/R-CMD-check/badge.svg" alt="R-CMD-check"></a></li>
</ul>
</div>
</div>
</div>


      <footer><div class="tidyverse">
  <p>workflowsets is a part of the <strong>tidymodels</strong> ecosystem, a collection of modeling packages designed with common APIs and a shared philosophy.</p>
</div>

<div class="author">
  <p>
    Developed by Max Kuhn.
    Site built by <a href="https://pkgdown.r-lib.org">pkgdown</a>.
  </p>
</div>

      </footer>
</div>

  


  </body>
</html>
