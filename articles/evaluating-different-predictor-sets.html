<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Evaluating different predictor sets • workflowsets</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="../tidyverse.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><link href="../tidyverse-2.css" rel="stylesheet">
<!--optional theme--><link href="../tidymodels.css" rel="stylesheet">
<meta property="og:title" content="Evaluating different predictor sets">
<meta property="og:description" content="workflowsets">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-115082821-1"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-115082821-1');
</script>
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div class="navbar-brand-container">
        <a class="navbar-brand" href="../index.html">workflowsets</a>
        <div class="info hidden-xs hidden-sm">
          <span class="partof">part of <a href="https://tidymodels.org">tidymodels</a></span>
          <span class="version version-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.1.9000</span>
        </div>
      </div>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav navbar-right">
<li>
  <a href="../articles/evaluating-different-predictor-sets.html">Evaluating different predictors</a>
</li>
<li>
  <a href="../articles/articles/tuning-and-comparing-models.html">Ranking models</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
        <li>
  <a href="https://github.com/tidymodels/workflowsets/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="evaluating-different-predictor-sets_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Evaluating different predictor sets</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/tidymodels/workflowsets/blob/master/vignettes/evaluating-different-predictor-sets.Rmd"><code>vignettes/evaluating-different-predictor-sets.Rmd</code></a></small>
      <div class="hidden name"><code>evaluating-different-predictor-sets.Rmd</code></div>

    </div>

    
    
<p>Workflow sets are collections of tidymodels workflow objects that are created as a set. A workflow object is a combination of a preprocessor (e.g. a formula or recipe) and a <code>parsnip</code> model specification.</p>
<p>For some problems, users might want to try different combinations of preprocessing options, models, and/or predictor sets. In stead of creating a large number of individual objects, a cohort of workflows can be created simultaneously.</p>
<p>In this example, we’ll fit the same model but specify different predictor sets in the preprocessor list.</p>
<p>Let’s take a look at the customer churn data from the <code>modeldata</code> package:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="va">mlc_churn</span>, package <span class="op">=</span> <span class="st">"modeldata"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/nrow.html">ncol</a></span><span class="op">(</span><span class="va">mlc_churn</span><span class="op">)</span>
<span class="co">#&gt; [1] 20</span></code></pre></div>
<p>There are 19 predictors, mostly numeric. This include aspects of their account, such as <code>number_customer_service_calls</code>. The outcome is a factor with two levels: “yes” and “no”.</p>
<p>We’ll use a logistic regression to model the data. Since the data set is not small, we’ll use basic 10-fold cross-validation to get resampled performance estimates.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/tidymodels/workflowsets">workflowsets</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://parsnip.tidymodels.org">parsnip</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://rsample.tidymodels.org">rsample</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org">dplyr</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org">ggplot2</a></span><span class="op">)</span>

<span class="va">lr_model</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://parsnip.tidymodels.org/reference/logistic_reg.html">logistic_reg</a></span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://parsnip.tidymodels.org/reference/set_engine.html">set_engine</a></span><span class="op">(</span><span class="st">"glm"</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span>
<span class="va">trn_tst_split</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rsample.tidymodels.org/reference/initial_split.html">initial_split</a></span><span class="op">(</span><span class="va">mlc_churn</span>, strata <span class="op">=</span> <span class="va">churn</span><span class="op">)</span>

<span class="co"># Resample the training set</span>
<span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span>
<span class="va">folds</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rsample.tidymodels.org/reference/vfold_cv.html">vfold_cv</a></span><span class="op">(</span><span class="fu"><a href="https://rsample.tidymodels.org/reference/initial_split.html">training</a></span><span class="op">(</span><span class="va">trn_tst_split</span><span class="op">)</span>, strata <span class="op">=</span> <span class="va">churn</span><span class="op">)</span></code></pre></div>
<p>We would make a basic workflow that uses this model specification and a basic formula. However, in this application, we’d like to know which predictors are associated with the best area under the ROC curve.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">formulas</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/leave_var_out_formulas.html">leave_var_out_formulas</a></span><span class="op">(</span><span class="va">churn</span> <span class="op">~</span> <span class="va">.</span>, data <span class="op">=</span> <span class="va">mlc_churn</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">formulas</span><span class="op">)</span>
<span class="co">#&gt; [1] 20</span>

<span class="va">formulas</span><span class="op">[[</span><span class="st">"area_code"</span><span class="op">]</span><span class="op">]</span>
<span class="co">#&gt; churn ~ state + account_length + international_plan + voice_mail_plan + </span>
<span class="co">#&gt;     number_vmail_messages + total_day_minutes + total_day_calls + </span>
<span class="co">#&gt;     total_day_charge + total_eve_minutes + total_eve_calls + </span>
<span class="co">#&gt;     total_eve_charge + total_night_minutes + total_night_calls + </span>
<span class="co">#&gt;     total_night_charge + total_intl_minutes + total_intl_calls + </span>
<span class="co">#&gt;     total_intl_charge + number_customer_service_calls</span>
<span class="co">#&gt; &lt;environment: base&gt;</span></code></pre></div>
<p>We create our workflow set:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">churn_workflows</span> <span class="op">&lt;-</span> 
   <span class="fu"><a href="../reference/workflow_set.html">workflow_set</a></span><span class="op">(</span>
      preproc <span class="op">=</span> <span class="va">formulas</span>, 
      models <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>logistic <span class="op">=</span> <span class="va">lr_model</span><span class="op">)</span>
   <span class="op">)</span>
<span class="va">churn_workflows</span>
<span class="co">#&gt; # A workflow set/tibble: 20 x 4</span>
<span class="co">#&gt;    wflow_id                               info             option    result    </span>
<span class="co">#&gt;    &lt;chr&gt;                                  &lt;list&gt;           &lt;list&gt;    &lt;list&gt;    </span>
<span class="co">#&gt;  1 state_logistic                         &lt;tibble [1 × 4]&gt; &lt;opts[0]&gt; &lt;list [0]&gt;</span>
<span class="co">#&gt;  2 account_length_logistic                &lt;tibble [1 × 4]&gt; &lt;opts[0]&gt; &lt;list [0]&gt;</span>
<span class="co">#&gt;  3 area_code_logistic                     &lt;tibble [1 × 4]&gt; &lt;opts[0]&gt; &lt;list [0]&gt;</span>
<span class="co">#&gt;  4 international_plan_logistic            &lt;tibble [1 × 4]&gt; &lt;opts[0]&gt; &lt;list [0]&gt;</span>
<span class="co">#&gt;  5 voice_mail_plan_logistic               &lt;tibble [1 × 4]&gt; &lt;opts[0]&gt; &lt;list [0]&gt;</span>
<span class="co">#&gt;  6 number_vmail_messages_logistic         &lt;tibble [1 × 4]&gt; &lt;opts[0]&gt; &lt;list [0]&gt;</span>
<span class="co">#&gt;  7 total_day_minutes_logistic             &lt;tibble [1 × 4]&gt; &lt;opts[0]&gt; &lt;list [0]&gt;</span>
<span class="co">#&gt;  8 total_day_calls_logistic               &lt;tibble [1 × 4]&gt; &lt;opts[0]&gt; &lt;list [0]&gt;</span>
<span class="co">#&gt;  9 total_day_charge_logistic              &lt;tibble [1 × 4]&gt; &lt;opts[0]&gt; &lt;list [0]&gt;</span>
<span class="co">#&gt; 10 total_eve_minutes_logistic             &lt;tibble [1 × 4]&gt; &lt;opts[0]&gt; &lt;list [0]&gt;</span>
<span class="co">#&gt; 11 total_eve_calls_logistic               &lt;tibble [1 × 4]&gt; &lt;opts[0]&gt; &lt;list [0]&gt;</span>
<span class="co">#&gt; 12 total_eve_charge_logistic              &lt;tibble [1 × 4]&gt; &lt;opts[0]&gt; &lt;list [0]&gt;</span>
<span class="co">#&gt; 13 total_night_minutes_logistic           &lt;tibble [1 × 4]&gt; &lt;opts[0]&gt; &lt;list [0]&gt;</span>
<span class="co">#&gt; 14 total_night_calls_logistic             &lt;tibble [1 × 4]&gt; &lt;opts[0]&gt; &lt;list [0]&gt;</span>
<span class="co">#&gt; 15 total_night_charge_logistic            &lt;tibble [1 × 4]&gt; &lt;opts[0]&gt; &lt;list [0]&gt;</span>
<span class="co">#&gt; 16 total_intl_minutes_logistic            &lt;tibble [1 × 4]&gt; &lt;opts[0]&gt; &lt;list [0]&gt;</span>
<span class="co">#&gt; 17 total_intl_calls_logistic              &lt;tibble [1 × 4]&gt; &lt;opts[0]&gt; &lt;list [0]&gt;</span>
<span class="co">#&gt; 18 total_intl_charge_logistic             &lt;tibble [1 × 4]&gt; &lt;opts[0]&gt; &lt;list [0]&gt;</span>
<span class="co">#&gt; 19 number_customer_service_calls_logistic &lt;tibble [1 × 4]&gt; &lt;opts[0]&gt; &lt;list [0]&gt;</span>
<span class="co">#&gt; 20 everything_logistic                    &lt;tibble [1 × 4]&gt; &lt;opts[0]&gt; &lt;list [0]&gt;</span></code></pre></div>
<p>Since we are using basic logistic regression, there is nothing to tune for these models. Instead of <code><a href="https://tune.tidymodels.org/reference/tune_grid.html">tune_grid()</a></code>, we’ll use <code><a href="https://tune.tidymodels.org/reference/fit_resamples.html">tune::fit_resamples()</a></code> instead by giving that function name as the first argument:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">churn_workflows</span> <span class="op">&lt;-</span> 
   <span class="va">churn_workflows</span> <span class="op">%&gt;%</span> 
   <span class="fu"><a href="../reference/workflow_map.html">workflow_map</a></span><span class="op">(</span><span class="st">"fit_resamples"</span>, resamples <span class="op">=</span> <span class="va">folds</span><span class="op">)</span>
<span class="va">churn_workflows</span>
<span class="co">#&gt; # A workflow set/tibble: 20 x 4</span>
<span class="co">#&gt;    wflow_id                               info             option    result   </span>
<span class="co">#&gt;    &lt;chr&gt;                                  &lt;list&gt;           &lt;list&gt;    &lt;list&gt;   </span>
<span class="co">#&gt;  1 state_logistic                         &lt;tibble [1 × 4]&gt; &lt;opts[1]&gt; &lt;rsmp[+]&gt;</span>
<span class="co">#&gt;  2 account_length_logistic                &lt;tibble [1 × 4]&gt; &lt;opts[1]&gt; &lt;rsmp[+]&gt;</span>
<span class="co">#&gt;  3 area_code_logistic                     &lt;tibble [1 × 4]&gt; &lt;opts[1]&gt; &lt;rsmp[+]&gt;</span>
<span class="co">#&gt;  4 international_plan_logistic            &lt;tibble [1 × 4]&gt; &lt;opts[1]&gt; &lt;rsmp[+]&gt;</span>
<span class="co">#&gt;  5 voice_mail_plan_logistic               &lt;tibble [1 × 4]&gt; &lt;opts[1]&gt; &lt;rsmp[+]&gt;</span>
<span class="co">#&gt;  6 number_vmail_messages_logistic         &lt;tibble [1 × 4]&gt; &lt;opts[1]&gt; &lt;rsmp[+]&gt;</span>
<span class="co">#&gt;  7 total_day_minutes_logistic             &lt;tibble [1 × 4]&gt; &lt;opts[1]&gt; &lt;rsmp[+]&gt;</span>
<span class="co">#&gt;  8 total_day_calls_logistic               &lt;tibble [1 × 4]&gt; &lt;opts[1]&gt; &lt;rsmp[+]&gt;</span>
<span class="co">#&gt;  9 total_day_charge_logistic              &lt;tibble [1 × 4]&gt; &lt;opts[1]&gt; &lt;rsmp[+]&gt;</span>
<span class="co">#&gt; 10 total_eve_minutes_logistic             &lt;tibble [1 × 4]&gt; &lt;opts[1]&gt; &lt;rsmp[+]&gt;</span>
<span class="co">#&gt; 11 total_eve_calls_logistic               &lt;tibble [1 × 4]&gt; &lt;opts[1]&gt; &lt;rsmp[+]&gt;</span>
<span class="co">#&gt; 12 total_eve_charge_logistic              &lt;tibble [1 × 4]&gt; &lt;opts[1]&gt; &lt;rsmp[+]&gt;</span>
<span class="co">#&gt; 13 total_night_minutes_logistic           &lt;tibble [1 × 4]&gt; &lt;opts[1]&gt; &lt;rsmp[+]&gt;</span>
<span class="co">#&gt; 14 total_night_calls_logistic             &lt;tibble [1 × 4]&gt; &lt;opts[1]&gt; &lt;rsmp[+]&gt;</span>
<span class="co">#&gt; 15 total_night_charge_logistic            &lt;tibble [1 × 4]&gt; &lt;opts[1]&gt; &lt;rsmp[+]&gt;</span>
<span class="co">#&gt; 16 total_intl_minutes_logistic            &lt;tibble [1 × 4]&gt; &lt;opts[1]&gt; &lt;rsmp[+]&gt;</span>
<span class="co">#&gt; 17 total_intl_calls_logistic              &lt;tibble [1 × 4]&gt; &lt;opts[1]&gt; &lt;rsmp[+]&gt;</span>
<span class="co">#&gt; 18 total_intl_charge_logistic             &lt;tibble [1 × 4]&gt; &lt;opts[1]&gt; &lt;rsmp[+]&gt;</span>
<span class="co">#&gt; 19 number_customer_service_calls_logistic &lt;tibble [1 × 4]&gt; &lt;opts[1]&gt; &lt;rsmp[+]&gt;</span>
<span class="co">#&gt; 20 everything_logistic                    &lt;tibble [1 × 4]&gt; &lt;opts[1]&gt; &lt;rsmp[+]&gt;</span></code></pre></div>
<p>To assess how to measure the effect of each predictor, let’s subtract the area under the ROC curve for each predictor from the same metric from the full model. We’ll match first by resampling ID, the compute the mean difference.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">roc_values</span> <span class="op">&lt;-</span> 
  <span class="va">churn_workflows</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://tune.tidymodels.org/reference/collect_predictions.html">collect_metrics</a></span><span class="op">(</span>summarize <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">.metric</span> <span class="op">==</span> <span class="st">"roc_auc"</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>wflow_id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html">gsub</a></span><span class="op">(</span><span class="st">"_logistic"</span>, <span class="st">""</span>, <span class="va">wflow_id</span><span class="op">)</span><span class="op">)</span>

<span class="va">full_model</span> <span class="op">&lt;-</span> 
  <span class="va">roc_values</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">wflow_id</span> <span class="op">==</span> <span class="st">"everything"</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span>full_model <span class="op">=</span> <span class="va">.estimate</span>, <span class="va">id</span><span class="op">)</span>

<span class="va">differences</span> <span class="op">&lt;-</span> 
  <span class="va">roc_values</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">wflow_id</span> <span class="op">!=</span> <span class="st">"everything"</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">full_join</a></span><span class="op">(</span><span class="va">full_model</span>, by <span class="op">=</span> <span class="st">"id"</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>performance_drop <span class="op">=</span> <span class="va">full_model</span> <span class="op">-</span> <span class="va">.estimate</span><span class="op">)</span>

<span class="va">summary_stats</span> <span class="op">&lt;-</span> 
  <span class="va">differences</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">wflow_id</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span><span class="op">(</span>
    std_err <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/sd.html">sd</a></span><span class="op">(</span><span class="va">performance_drop</span><span class="op">)</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">performance_drop</span><span class="op">)</span><span class="op">)</span>,
    performance_drop <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">performance_drop</span><span class="op">)</span>,
    lower <span class="op">=</span> <span class="va">performance_drop</span> <span class="op">-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">qnorm</a></span><span class="op">(</span><span class="fl">0.975</span><span class="op">)</span> <span class="op">*</span> <span class="va">std_err</span>,
    upper <span class="op">=</span> <span class="va">performance_drop</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">qnorm</a></span><span class="op">(</span><span class="fl">0.975</span><span class="op">)</span> <span class="op">*</span> <span class="va">std_err</span>,
    .groups <span class="op">=</span> <span class="st">"drop"</span>
  <span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>
    wflow_id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">wflow_id</span><span class="op">)</span>,
    wflow_id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/reorder.factor.html">reorder</a></span><span class="op">(</span><span class="va">wflow_id</span>, <span class="va">performance_drop</span><span class="op">)</span>
    <span class="op">)</span>

<span class="va">summary_stats</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">lower</span> <span class="op">&gt;</span> <span class="fl">0</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 4 x 5</span>
<span class="co">#&gt;   wflow_id                        std_err performance_drop     lower    upper</span>
<span class="co">#&gt;   &lt;fct&gt;                             &lt;dbl&gt;            &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;</span>
<span class="co">#&gt; 1 international_plan            0.00194           0.0577   0.0539    0.0615  </span>
<span class="co">#&gt; 2 number_customer_service_calls 0.00308           0.0681   0.0621    0.0742  </span>
<span class="co">#&gt; 3 total_night_calls             0.0000815         0.000176 0.0000167 0.000336</span>
<span class="co">#&gt; 4 voice_mail_plan               0.000962          0.00279  0.000907  0.00468</span>

<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">summary_stats</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">performance_drop</span>, y <span class="op">=</span> <span class="va">wflow_id</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_linerange.html">geom_errorbar</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>xmin <span class="op">=</span> <span class="va">lower</span>, xmax <span class="op">=</span> <span class="va">upper</span><span class="op">)</span>, width <span class="op">=</span> <span class="fl">.25</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ylab</a></span><span class="op">(</span><span class="st">""</span><span class="op">)</span></code></pre></div>
<p><img src="evaluating-different-predictor-sets_files/figure-html/churn-metrics-1.png" width="576"></p>
<p>From this, there are a predictors that, when not included in the model, have a significant effect on the performance metric.</p>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="tidyverse">
  <p>workflowsets is a part of the <strong>tidymodels</strong> ecosystem, a collection of modeling packages designed with common APIs and a shared philosophy.</p>
</div>

<div class="author">
  <p>
    Developed by Max Kuhn.
    Site built by <a href="https://pkgdown.r-lib.org">pkgdown</a>.
  </p>
</div>

      </footer>
</div>

  


  </body>
</html>
